{"ast":null,"code":"import _objectSpread from\"/Users/martinbonchev/coding/udemy/react/burger-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/martinbonchev/coding/udemy/react/burger-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/martinbonchev/coding/udemy/react/burger-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/martinbonchev/coding/udemy/react/burger-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/martinbonchev/coding/udemy/react/burger-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import Modal from\"../../components/UI/Modal/Modal\";import Aux from\"../Aux/Aux\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var withErrorHandler=function withErrorHandler(WrappedComponent,axios){return/*#__PURE__*/function(_Component){_inherits(_class2,_Component);var _super=_createSuper(_class2);function _class2(){var _this;_classCallCheck(this,_class2);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={// initialized: false,\nerror:null};_this.errorConfirmedHandler=function(){_this.setState({error:null});};return _this;}_createClass(_class2,[{key:\"componentWillMount\",value:function componentWillMount(){var _this2=this;this.requestInterceptor=axios.interceptors.request.use(function(req){_this2.setState({error:null});return req;});this.responseInterceptor=axios.interceptors.response.use(function(res){return res;},function(error){_this2.setState({error:error});});// this.setState({ initialized: true });\n}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){axios.interceptors.request.eject(this.requestInterceptor);axios.interceptors.response.eject(this.responseInterceptor);}},{key:\"render\",value:function render(){// const { initialized } = this.state;\n// if (!initialized) return null;\nreturn/*#__PURE__*/_jsxs(Aux,{children:[/*#__PURE__*/_jsx(Modal,{show:this.state.error,modalClosed:this.errorConfirmedHandler,children:this.state.error?this.state.error.message:null}),/*#__PURE__*/_jsx(WrappedComponent,_objectSpread({},this.props))]});}}]);return _class2;}(Component);};export default withErrorHandler;","map":{"version":3,"sources":["/Users/martinbonchev/coding/udemy/react/burger-project/src/hoc/withErrorHandler/withErrorHandler.js"],"names":["React","Component","Modal","Aux","withErrorHandler","WrappedComponent","axios","state","error","errorConfirmedHandler","setState","requestInterceptor","interceptors","request","use","req","responseInterceptor","response","res","eject","message","props"],"mappings":"g1BAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,KAAP,KAAkB,iCAAlB,CACA,MAAOC,CAAAA,GAAP,KAAgB,YAAhB,C,wFAEA,GAAMC,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAACC,gBAAD,CAAmBC,KAAnB,CAA6B,CACpD,oUACEC,KADF,CACU,CACN;AACAC,KAAK,CAAE,IAFD,CADV,OAyBEC,qBAzBF,CAyB0B,UAAM,CAC5B,MAAKC,QAAL,CAAc,CAAEF,KAAK,CAAE,IAAT,CAAd,EACD,CA3BH,qEAME,6BAAqB,iBACnB,KAAKG,kBAAL,CAA0BL,KAAK,CAACM,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CAA+B,SAACC,GAAD,CAAS,CAChE,MAAI,CAACL,QAAL,CAAc,CAAEF,KAAK,CAAE,IAAT,CAAd,EACA,MAAOO,CAAAA,GAAP,CACD,CAHyB,CAA1B,CAIA,KAAKC,mBAAL,CAA2BV,KAAK,CAACM,YAAN,CAAmBK,QAAnB,CAA4BH,GAA5B,CACzB,SAACI,GAAD,QAASA,CAAAA,GAAT,EADyB,CAEzB,SAACV,KAAD,CAAW,CACT,MAAI,CAACE,QAAL,CAAc,CAAEF,KAAK,CAAEA,KAAT,CAAd,EACD,CAJwB,CAA3B,CAMA;AACD,CAlBH,oCAoBE,+BAAuB,CACrBF,KAAK,CAACM,YAAN,CAAmBC,OAAnB,CAA2BM,KAA3B,CAAiC,KAAKR,kBAAtC,EACAL,KAAK,CAACM,YAAN,CAAmBK,QAAnB,CAA4BE,KAA5B,CAAkC,KAAKH,mBAAvC,EACD,CAvBH,sBA4BE,iBAAS,CACP;AACA;AACA,mBACE,MAAC,GAAD,yBACE,KAAC,KAAD,EACE,IAAI,CAAE,KAAKT,KAAL,CAAWC,KADnB,CAEE,WAAW,CAAE,KAAKC,qBAFpB,UAIG,KAAKF,KAAL,CAAWC,KAAX,CAAmB,KAAKD,KAAL,CAAWC,KAAX,CAAiBY,OAApC,CAA8C,IAJjD,EADF,cAOE,KAAC,gBAAD,kBAAsB,KAAKC,KAA3B,EAPF,GADF,CAWD,CA1CH,qBAAqBpB,SAArB,EA4CD,CA7CD,CA+CA,cAAeG,CAAAA,gBAAf","sourcesContent":["import React, { Component } from \"react\";\nimport Modal from \"../../components/UI/Modal/Modal\";\nimport Aux from \"../Aux/Aux\";\n\nconst withErrorHandler = (WrappedComponent, axios) => {\n  return class extends Component {\n    state = {\n      // initialized: false,\n      error: null,\n    };\n\n    componentWillMount() {\n      this.requestInterceptor = axios.interceptors.request.use((req) => {\n        this.setState({ error: null });\n        return req;\n      });\n      this.responseInterceptor = axios.interceptors.response.use(\n        (res) => res,\n        (error) => {\n          this.setState({ error: error });\n        }\n      );\n      // this.setState({ initialized: true });\n    }\n\n    componentWillUnmount() {\n      axios.interceptors.request.eject(this.requestInterceptor);\n      axios.interceptors.response.eject(this.responseInterceptor);\n    }\n\n    errorConfirmedHandler = () => {\n      this.setState({ error: null });\n    };\n    render() {\n      // const { initialized } = this.state;\n      // if (!initialized) return null;\n      return (\n        <Aux>\n          <Modal\n            show={this.state.error}\n            modalClosed={this.errorConfirmedHandler}\n          >\n            {this.state.error ? this.state.error.message : null}\n          </Modal>\n          <WrappedComponent {...this.props} />\n        </Aux>\n      );\n    }\n  };\n};\n\nexport default withErrorHandler;\n"]},"metadata":{},"sourceType":"module"}