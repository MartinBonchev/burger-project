{"ast":null,"code":"import _objectSpread from\"/Users/martinbonchev/coding/udemy/react/burger-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/martinbonchev/coding/udemy/react/burger-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/martinbonchev/coding/udemy/react/burger-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/martinbonchev/coding/udemy/react/burger-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/martinbonchev/coding/udemy/react/burger-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import Aux from\"../../hoc/Aux/Aux\";import Burger from\"../../components/Burger/Burger\";import BuildControls from\"../../components/Burger/BuildControls/BuildControls\";import Modal from\"../../components/UI/Modal/Modal\";import OrderSummary from\"../../components/Burger/OrderSummary/OrderSummary\";import axios from\"../../axios-orders\";import withErrorHandler from\"../../hoc/withErrorHandler/withErrorHandler\";import Spinner from\"../../components/UI/Spinner/Spinner\";import*as actions from\"../../store/actions/index\";import{connect}from\"react-redux\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var BurgerBuilder=/*#__PURE__*/function(_Component){_inherits(BurgerBuilder,_Component);var _super=_createSuper(BurgerBuilder);function BurgerBuilder(){var _this;_classCallCheck(this,BurgerBuilder);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={durationTime:0,purchasing:false};_this.checkoutNow=function(){_this.setState({purchasing:!_this.state.purchasing});};_this.purchaseCancelHandler=function(){_this.setState({purchasing:!_this.state.purchasing});};_this.deliveryDurationCalculator=function(ingredients){var totalIngredients=null;var duration=0;totalIngredients=Object.values(ingredients).reduce(function(acc,curr){acc+=Number(curr);return acc;},0);if(totalIngredients>=1)duration=15;if(totalIngredients>=4)duration=20;if(totalIngredients>=6)duration=30;if(totalIngredients>=10)duration=60;return duration;};_this.purchaseContinueHandler=function(){_this.props.onInitPurchase();_this.props.history.push(\"checkout\");};return _this;}_createClass(BurgerBuilder,[{key:\"componentDidMount\",value:function componentDidMount(){this.props.onInitIngredients(this.props.token);}},{key:\"updatePerchaseState\",value:function updatePerchaseState(ingredients){var sum=Object.values(ingredients).reduce(function(acc,curr){return acc+curr;},0);return sum>0;}},{key:\"render\",value:function render(){var disabledInfo=_objectSpread({},this.props.ingredients);for(var key in disabledInfo){disabledInfo[key]=disabledInfo[key]<=0;}var orderSummary=null;var burger=this.props.error?/*#__PURE__*/_jsx(\"p\",{children:\"Ingredients can't be loaded!\"}):/*#__PURE__*/_jsx(Spinner,{});if(this.props.ingredients){burger=/*#__PURE__*/_jsxs(Aux,{children:[/*#__PURE__*/_jsx(Burger,{ingredients:this.props.ingredients}),/*#__PURE__*/_jsx(BuildControls,{ingredientAdded:this.props.onIngredientAdded,ingredientRemoved:this.props.onIngredientRemoved,disabled:disabledInfo,price:this.props.totalPrice,perchasable:!this.updatePerchaseState(this.props.ingredients),checkout:this.checkoutNow})]});orderSummary=/*#__PURE__*/_jsx(OrderSummary,{ingredients:this.props.ingredients,price:this.props.totalPrice,durationTime:this.deliveryDurationCalculator(this.props.ingredients),closeModal:this.purchaseCancelHandler,purchaseContinue:this.purchaseContinueHandler});}return/*#__PURE__*/_jsxs(Aux,{children:[/*#__PURE__*/_jsx(Modal,{show:this.state.purchasing,modalClosed:this.purchaseCancelHandler,children:orderSummary}),burger]});}}]);return BurgerBuilder;}(Component);var mapStateToProps=function mapStateToProps(state){return{ingredients:state.burgerBuilder.ingredients,totalPrice:state.burgerBuilder.totalPrice,error:state.burgerBuilder.error,token:state.auth.token,path:state.auth.authRedirectPath};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{onIngredientAdded:function onIngredientAdded(ingName){return dispatch(actions.addIngredient(ingName));},onIngredientRemoved:function onIngredientRemoved(ingName){return dispatch(actions.removeIngredient(ingName));},onInitIngredients:function onInitIngredients(token){return dispatch(actions.initIngredients(token));},onInitPurchase:function onInitPurchase(){return dispatch(actions.purchaseInit());},onSetAuthRedirect:function onSetAuthRedirect(path){return dispatch(actions.setAuthRedirectPath(path));}};};export default connect(mapStateToProps,mapDispatchToProps)(withErrorHandler(BurgerBuilder,axios));","map":{"version":3,"sources":["/Users/martinbonchev/coding/udemy/react/burger-project/src/containers/BurgerBuilder/BurgerBuilder.js"],"names":["React","Component","Aux","Burger","BuildControls","Modal","OrderSummary","axios","withErrorHandler","Spinner","actions","connect","BurgerBuilder","state","durationTime","purchasing","checkoutNow","setState","purchaseCancelHandler","deliveryDurationCalculator","ingredients","totalIngredients","duration","Object","values","reduce","acc","curr","Number","purchaseContinueHandler","props","onInitPurchase","history","push","onInitIngredients","token","sum","disabledInfo","key","orderSummary","burger","error","onIngredientAdded","onIngredientRemoved","totalPrice","updatePerchaseState","mapStateToProps","burgerBuilder","auth","path","authRedirectPath","mapDispatchToProps","dispatch","ingName","addIngredient","removeIngredient","initIngredients","purchaseInit","onSetAuthRedirect","setAuthRedirectPath"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Aux from \"../../hoc/Aux/Aux\";\nimport Burger from \"../../components/Burger/Burger\";\nimport BuildControls from \"../../components/Burger/BuildControls/BuildControls\";\nimport Modal from \"../../components/UI/Modal/Modal\";\nimport OrderSummary from \"../../components/Burger/OrderSummary/OrderSummary\";\nimport axios from \"../../axios-orders\";\nimport withErrorHandler from \"../../hoc/withErrorHandler/withErrorHandler\";\nimport Spinner from \"../../components/UI/Spinner/Spinner\";\n\nimport * as actions from \"../../store/actions/index\";\nimport { connect } from \"react-redux\";\n\nexport class BurgerBuilder extends Component {\n  state = {\n    durationTime: 0,\n    purchasing: false,\n  };\n  componentDidMount() {\n    this.props.onInitIngredients(this.props.token);\n  }\n  updatePerchaseState(ingredients) {\n    const sum = Object.values(ingredients).reduce((acc, curr) => {\n      return acc + curr;\n    }, 0);\n    return sum > 0;\n  }\n\n  checkoutNow = () => {\n    this.setState({ purchasing: !this.state.purchasing });\n  };\n\n  purchaseCancelHandler = () => {\n    this.setState({ purchasing: !this.state.purchasing });\n  };\n  deliveryDurationCalculator = (ingredients) => {\n    let totalIngredients = null;\n    let duration = 0;\n    totalIngredients = Object.values(ingredients).reduce((acc, curr) => {\n      acc += Number(curr);\n      return acc;\n    }, 0);\n    if (totalIngredients >= 1) duration = 15;\n    if (totalIngredients >= 4) duration = 20;\n    if (totalIngredients >= 6) duration = 30;\n    if (totalIngredients >= 10) duration = 60;\n    return duration;\n  };\n\n  purchaseContinueHandler = () => {\n    this.props.onInitPurchase();\n    this.props.history.push(\"checkout\");\n  };\n  render() {\n    const disabledInfo = {\n      ...this.props.ingredients,\n    };\n    for (const key in disabledInfo) {\n      disabledInfo[key] = disabledInfo[key] <= 0;\n    }\n    let orderSummary = null;\n\n    let burger = this.props.error ? (\n      <p>Ingredients can't be loaded!</p>\n    ) : (\n      <Spinner />\n    );\n    if (this.props.ingredients) {\n      burger = (\n        <Aux>\n          <Burger ingredients={this.props.ingredients} />\n\n          <BuildControls\n            ingredientAdded={this.props.onIngredientAdded}\n            ingredientRemoved={this.props.onIngredientRemoved}\n            disabled={disabledInfo}\n            price={this.props.totalPrice}\n            perchasable={!this.updatePerchaseState(this.props.ingredients)}\n            checkout={this.checkoutNow}\n          />\n        </Aux>\n      );\n\n      orderSummary = (\n        <OrderSummary\n          ingredients={this.props.ingredients}\n          price={this.props.totalPrice}\n          durationTime={this.deliveryDurationCalculator(this.props.ingredients)}\n          closeModal={this.purchaseCancelHandler}\n          purchaseContinue={this.purchaseContinueHandler}\n        />\n      );\n    }\n\n    return (\n      <Aux>\n        <Modal\n          show={this.state.purchasing}\n          modalClosed={this.purchaseCancelHandler}\n        >\n          {orderSummary}\n        </Modal>\n        {burger}\n      </Aux>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    ingredients: state.burgerBuilder.ingredients,\n    totalPrice: state.burgerBuilder.totalPrice,\n    error: state.burgerBuilder.error,\n    token: state.auth.token,\n    path: state.auth.authRedirectPath,\n  };\n};\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    onIngredientAdded: (ingName) => dispatch(actions.addIngredient(ingName)),\n    onIngredientRemoved: (ingName) =>\n      dispatch(actions.removeIngredient(ingName)),\n    onInitIngredients: (token) => dispatch(actions.initIngredients(token)),\n    onInitPurchase: () => dispatch(actions.purchaseInit()),\n    onSetAuthRedirect: (path) => dispatch(actions.setAuthRedirectPath(path)),\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(withErrorHandler(BurgerBuilder, axios));\n"]},"metadata":{},"sourceType":"module"}